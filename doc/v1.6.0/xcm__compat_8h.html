<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Extensible Connection-oriented Messaging (XCM): include/xcm_compat.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Extensible Connection-oriented Messaging (XCM)
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">xcm_compat.h File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This file contains obsolete parts of the XCM core API.  
<a href="#details">More...</a></p>

<p><a href="xcm__compat_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a8b41267a9d7f1c267b1ef1ff446a5d06" id="r_a8b41267a9d7f1c267b1ef1ff446a5d06"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xcm__compat_8h.html#a8b41267a9d7f1c267b1ef1ff446a5d06">XCM_FD_READABLE</a>&#160;&#160;&#160;(1&lt;&lt;0)</td></tr>
<tr class="separator:a8b41267a9d7f1c267b1ef1ff446a5d06"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb5f23cfc23562bae00923bdb06e7e23" id="r_abb5f23cfc23562bae00923bdb06e7e23"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xcm__compat_8h.html#abb5f23cfc23562bae00923bdb06e7e23">XCM_FD_WRITABLE</a>&#160;&#160;&#160;(1&lt;&lt;1)</td></tr>
<tr class="separator:abb5f23cfc23562bae00923bdb06e7e23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f7eb63ad93365ea33cda4d5bbafc8d9" id="r_a6f7eb63ad93365ea33cda4d5bbafc8d9"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xcm__compat_8h.html#a6f7eb63ad93365ea33cda4d5bbafc8d9">XCM_FD_EXCEPTION</a>&#160;&#160;&#160;(1&lt;&lt;2)</td></tr>
<tr class="separator:a6f7eb63ad93365ea33cda4d5bbafc8d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a2e09a4b8705bb688ffe57f184308186e" id="r_a2e09a4b8705bb688ffe57f184308186e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="xcm__compat_8h.html#a2e09a4b8705bb688ffe57f184308186e">xcm_want</a> (struct xcm_socket *socket, int condition, int *fds, int *events, size_t capacity)</td></tr>
<tr class="separator:a2e09a4b8705bb688ffe57f184308186e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file contains obsolete parts of the XCM core API. </p>
<p>It should not be included directly, but rather only via &lt;<a class="el" href="xcm_8h.html" title="This file contains the core Extensible Connection-oriented Messaging (XCM) API.">xcm.h</a>&gt;. </p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a8b41267a9d7f1c267b1ef1ff446a5d06" name="a8b41267a9d7f1c267b1ef1ff446a5d06"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b41267a9d7f1c267b1ef1ff446a5d06">&#9670;&#160;</a></span>XCM_FD_READABLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XCM_FD_READABLE&#160;&#160;&#160;(1&lt;&lt;0)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Flag bit denoting a readable fd event in <a class="el" href="xcm__compat_8h.html#a2e09a4b8705bb688ffe57f184308186e">xcm_want()</a>. </p>

</div>
</div>
<a id="abb5f23cfc23562bae00923bdb06e7e23" name="abb5f23cfc23562bae00923bdb06e7e23"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb5f23cfc23562bae00923bdb06e7e23">&#9670;&#160;</a></span>XCM_FD_WRITABLE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XCM_FD_WRITABLE&#160;&#160;&#160;(1&lt;&lt;1)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Flag bit denoting a writable fd event. </p>

</div>
</div>
<a id="a6f7eb63ad93365ea33cda4d5bbafc8d9" name="a6f7eb63ad93365ea33cda4d5bbafc8d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6f7eb63ad93365ea33cda4d5bbafc8d9">&#9670;&#160;</a></span>XCM_FD_EXCEPTION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XCM_FD_EXCEPTION&#160;&#160;&#160;(1&lt;&lt;2)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Flag bit denoting a exception fd event. </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a2e09a4b8705bb688ffe57f184308186e" name="a2e09a4b8705bb688ffe57f184308186e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2e09a4b8705bb688ffe57f184308186e">&#9670;&#160;</a></span>xcm_want()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xcm_want </td>
          <td>(</td>
          <td class="paramtype">struct xcm_socket *&#160;</td>
          <td class="paramname"><em>socket</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>condition</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>fds</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int *&#160;</td>
          <td class="paramname"><em>events</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>capacity</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Query the socket what events on which file descriptors it's waiting for.</p>
<p>Please note: this function is obsolete, replaced by <a class="el" href="xcm_8h.html#a11d9fe2b8cf695cd7b9cf30d01d12d4c">xcm_fd()</a> and <a class="el" href="xcm_8h.html#a0ad43ceebe461d6f361bc8f11d5dd463">xcm_await()</a>.</p>
<p>This function is only used by event-driven application and with XCM sockets in non-blocking mode. For an overview on this subject, see <a class="el" href="index.html#select">Event-driven Programming Support</a>.</p>
<p>With <a class="el" href="xcm__compat_8h.html#a2e09a4b8705bb688ffe57f184308186e">xcm_want()</a>, the application will inform the XCM socket what condition it's waiting for (i.e. what XCM operation it wants to perform), and in return the XCM socket will provide a set of file descriptors and, for each fd, information on what type of event on that fd it require to make progress. Progress can mean both progress toward the goal of reaching the application's desired socket condition, or finishing any outstanding task the XCM socket has.</p>
<p>In case any of the conditions the application is asking for are believed to be already met, the <a class="el" href="xcm__compat_8h.html#a2e09a4b8705bb688ffe57f184308186e">xcm_want()</a> call will return 0.</p>
<p>In case the XCM socket has no outstanding tasks, and the application is not asking for any operation that the XCM socket believes it can't immediate fulfill, the call will return 0.</p>
<p>The conditions specified by the application are future operation it wishes to perform on a socket (as opposed to finishing operations the socket has already accepted). For example, if an application use <a class="el" href="xcm_8h.html#ac1a888c879430f4fd51ccf43d6cec344">xcm_send()</a> to transmit a message, and the XCM socket accept this request (by returning 0 on the call), the application shouldn't send <a class="el" href="xcm_8h.html#a864b4817dbcca717b5b9778d2c6deac3">XCM_SO_SENDABLE</a> flag for the reason of having XCM finishing the transmission; the task of actually handing over message to the lower layer is performed by XCM regardless of the conditions specified.</p>
<p>Note that XCM may ask the application to wait for the connection's fd or fds to become writable, even if the application is waiting to receive a message. It may also ask the application to wait for the connection's fd to become readable, even if the application is attemting to send a messaging.</p>
<p>Even though the conditions for a particular connection socket are met (fd is becoming writable, for example), there's no guarantee that the <a class="el" href="xcm_8h.html#ac1a888c879430f4fd51ccf43d6cec344">xcm_send()</a> or <a class="el" href="xcm_8h.html#a01b290a1b9e5a806c955322883481d29">xcm_receive()</a> won't block (or in case of non-blocking mode, won't fail and set EAGAIN).</p>
<p>The XCM socket fds may only be used with select(). Supplying this fd to any other OS calls (such as setsockopt(2), read(2) etc) is prohibited.</p>
<p>The information received on which fd to use, and what events on that fd are relevant for the connection socket in its current state, are only valid until more xcm_* calls are made on this socket. See <a class="el" href="index.html#outstanding_tasks">Finishing Outstanding Tasks</a> for more information.</p>
<p>The fd is an positive integer, unique within this process.</p>
<p>The condition parameter is a bitmask, with the bits being <a class="el" href="xcm_8h.html#aa3429d5eebf90c5572549d77a3d08f2f">XCM_SO_RECEIVABLE</a>, <a class="el" href="xcm_8h.html#a864b4817dbcca717b5b9778d2c6deac3">XCM_SO_SENDABLE</a>, and/or <a class="el" href="xcm_8h.html#a6835d2d195427b0748c9c2fd782596f2">XCM_SO_ACCEPTABLE</a>. If no bits are set, the application is not interested in anything beyond this XCM socket to finish any outstanding task.</p>
<p>Each element in the events array is an int used as a bitmask. The bitmask at position N in the events array represents the file descriptor events the XCM transport is waiting for, for fd at position N in the fds array. The bits are <a class="el" href="xcm__compat_8h.html#a8b41267a9d7f1c267b1ef1ff446a5d06">XCM_FD_READABLE</a>, <a class="el" href="xcm__compat_8h.html#abb5f23cfc23562bae00923bdb06e7e23">XCM_FD_WRITABLE</a> and/or <a class="el" href="xcm__compat_8h.html#a6f7eb63ad93365ea33cda4d5bbafc8d9">XCM_FD_EXCEPTION</a>. At least one bit is always set.</p>
<p>If a socket is waiting for multiple events (for example, both readable and writable on the same fd, or readable on one fd, and writeable on another), the condition is met whenever any of the events occur (as oppose to all events).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">socket</td><td>The XCM socket. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">condition</td><td>The condition the application is waiting for. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">fds</td><td>An user-supplied array to store the fds. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">events</td><td>An user-supplied array of int to store the bitmask of each of the fds in the fds array. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">capacity</td><td>The length of the fds and events arrays.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the number (&gt;=0) of fds, or -1 if an error occured (in which case errno is set).</dd></dl>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">errno   </th><th class="markdownTableHeadNone">Description    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">EOVERFLOW   </td><td class="markdownTableBodyNone">The user-supplied buffer was too small to fit the socket's fds.    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">EINVAL   </td><td class="markdownTableBodyNone">The socket is not in blocking mode, or the condition bits are invalid.   </td></tr>
</table>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Jul 30 2025 11:08:22 for Extensible Connection-oriented Messaging (XCM) by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
